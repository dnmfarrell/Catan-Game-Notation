{
  "id": "https://github.com/dnmfarrell/Settlers-Game-Notation/schema/message.json",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "definitions": {
    "tCode": {
      "type": "string",
      "enum": ["D", "F", "FO", "H", "M", "P", "S"]
    },
    "rNumber": {
      "type": ["integer", "null"],
      "minimum": 2,
      "maximum": 12
    },
    "tile": {
      "type": "array",
      "minSize": 2,
      "maxSize": 2,
      "items": {
        "type": "integer"
      }
    },
    "intersection": {
      "type": "array",
      "minSize": 3,
      "maxSize": 3,
      "items": {
        "$ref": "#/definitions/tile"
      }
    },
    "path": {
      "type": "array",
      "minSize": 2,
      "maxSize": 2,
      "items": {
        "$ref": "#/definitions/intersection"
      }
    },
    "hCode": {
      "type": "string",
      "enum": ["HR", "HRB", "HRG", "HRL", "HRO", "HRW"]
    },
    "tiles": {
      "type": "array",
      "minSize": 37,
      "items": {
        "type": "object",
        "allOf": [{
          "$ref": "#/definitions/tile"
        }, {
          "$ref": "#/definitions/tile"
        }, {
          "$ref": "#/definitions/tile"
        }]
      }
    },
    "harbors": {
      "type": "array",
      "minSize": 8,
      "items": {
        "type": "object",
        "allOf": [{
          "$ref": "#/definitions/path"
        }, {
          "$ref": "#/definitions/hCode"
        }]
      }
    },
    "resources": {
      "type": "object",
      "properties": {
        "player": {
          "type": "string"
        },
        "B": {
          "type": "integer"
        },
        "G": {
          "type": "integer"
        },
        "L": {
          "type": "integer"
        },
        "O": {
          "type": "integer"
        },
        "W": {
          "type": "integer"
        }
      }
    },
    "cCode": {
      "type": "string",
      "enum": ["KN", "MO", "RB", "VP", "YP"]
    },
    "phase": {
      "type": "string",
      "enum": ["Setup", "Deployment", "Play", "End"]
    },
    "message": {
      "type": "object",
      "properties": {
        "uuid": {
          "type": "string"
        },
        "player": {
          "type": "string"
        },
        "batch": {
          "type": "array",
          "minSize": 2,
          "maxSize": 2,
          "items": {
            "type": "number"
          }
        },
        "required": ["uuid", "player"]
      }
    }
  },
  "type": "object",
  "allOf": [{
    "$ref": "#/definitions/message"},
    {"oneOf": [{
      "properties": {
        "event": "BC",
        "value": {
          "$ref": "#/definitions/intersection"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "BD",
        "value": {
          "$ref": "#/definitions/cCode"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "BR",
        "value": {
          "$ref": "#/definitions/intersection"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "BS",
        "value": {
          "$ref": "#/definitions/intersection"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "CH",
        "value": {
          "properties": {
            "msg": {
              "type": "string"
            }
          },
          "required": ["msg"]
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "CR",
        "value": {
          "$ref": "#/definitions/resources"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "DR",
        "value": {
          "properties": {
            "result": {
              "type": "integer"
            }
          },
          "required": ["result"]
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "GO",
        "value": {}
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "LA",
        "value": {
          "properties": {
            "strength": {
              "type": "integer"
            }
          },
          "required": ["strength"]
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "LR",
        "value": {
          "properties": {
            "length": {
              "type": "integer"
            }
          },
          "required": ["length"]
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "MD",
        "value": {
          "$ref": "#/definitions/tiles",
          "$ref": "#/definitions/harbors"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "MO",
        "value": {
          "$ref": "#/definitions/resources"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "PA",
        "value": {
          "properties": {
            "player": {
              "type": "string"
            }
          },
          "required": ["player"]
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "PD",
        "value": {
          "$ref": "#/definitions/cCode"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "PE",
        "value": {
          "$ref": "#/definitions/phase"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "PS",
        "value": {
          "$ref": "#/definitions/phase"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "RA",
        "value": {}
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "RD",
        "value": {}
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "RE",
        "value": {
          "properties": {
            "round": {
              "type": "integer"
            }
          },
          "required": ["round"]
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "RS",
        "value": {
          "properties": {
            "round": {
              "type": "integer"
            }
          },
          "required": ["round"]
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "RM",
        "value": {
          "$ref": "#/definitions/tile"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "RP",
        "value": {
          "$ref": "#/definitions/resources"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "RR",
        "value": {
          "$ref": "#/definitions/resources"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "TA",
        "value": {
          "properties": {
            "uuid": {
              "type": "string"
            }
          },
          "required": ["round"]
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "TD",
        "value": {
          "properties": {
            "uuid": {
              "type": "string"
            }
          },
          "required": ["round"]
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "TC",
        "value": {
          "properties": {
            "uuid": {
              "type": "string"
            }
          },
          "required": ["round"]
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "TB",
        "value": {
          "$ref": "#/definitions/resources"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "TO",
        "value": {
          "$ref": "#/definitions/resources"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "TE",
        "value": {}
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "TS",
        "value": {}
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "TR",
        "value": {
          "allOf": [{
            "$ref": "#/definitions/resources"
          }, {
            "properties": {
              "uuid": {
                "type": "string"
              }
            },
            "required": ["uuid"]
          }]
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "YP",
        "value": {
          "$ref": "#/definitions/resources"
        }
      },
      "required": ["event", "value"]
    }, {
      "properties": {
        "event": "",
        "value": {
          "$ref": "#/definitions/"
        }
      },
      "required": ["event", "value"]
    }]}
  ]
}
